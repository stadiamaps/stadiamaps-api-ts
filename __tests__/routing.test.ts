import {
    RoutingApi,
    Configuration,
    RouteRequest,
    RoutingWaypointTypeEnum,
    RouteSummary,
    NearestRoadsRequest,
    MatrixRequest,
    IsochroneRequest,
    MapMatchRequest,
    MapMatchRequestShapeMatchEnum, TraceAttributesRequest, DistanceUnit
} from '../src';
import {shouldRunIntegrationTests, apiKey} from "./utils";
import {disableFetchMocks, enableFetchMocks} from "jest-fetch-mock";

const locationA = {
    "lon": -149.543469,
    "lat": 60.5347155,
    "type": RoutingWaypointTypeEnum.Break
};
const locationB = {
    "lon": -149.5485806,
    "lat": 60.5349908,
    "type": RoutingWaypointTypeEnum.Break
};
const routeRequest: RouteRequest = {
    locations: [
        locationA,
        locationB
    ],
    costing: "auto",
    costingOptions: {
        auto: {
            useTolls: 1,
            useHighways: 0,
        }
    },
    directionsOptions: {
        units: DistanceUnit.Mi
    }
};
const mockRouteRes = {"id": "42", "trip":{"locations":[{"type":"break","lat":60.534715,"lon":-149.543469,"original_index":0},{"type":"break","lat":60.53499,"lon":-149.54858,"original_index":1}],"legs":[{"maneuvers":[{"type":1,"instruction":"Drive west on AK 1/Seward Highway.","verbal_pre_transition_instruction":"Drive west on Alaska 1, Seward Highway. Then You will arrive at your destination.","verbal_post_transition_instruction":"Continue for 900 feet.","street_names":["AK 1","Seward Highway"],"time":11.487,"length":0.176,"cost":15.508,"begin_shape_index":0,"end_shape_index":9,"verbal_multi_cue":true,"travel_mode":"drive","travel_type":"car"},{"type":4,"instruction":"You have arrived at your destination.","verbal_transition_alert_instruction":"You will arrive at your destination.","verbal_pre_transition_instruction":"You have arrived at your destination.","time":0,"length":0,"cost":0,"begin_shape_index":9,"end_shape_index":9,"travel_mode":"drive","travel_type":"car"}],"summary":{"has_time_restrictions":false,"min_lat":60.534715,"min_lon":-149.54858,"max_lat":60.535008,"max_lon":-149.543469,"time":11.487,"length":0.176,"cost":15.508},"shape":"wzvmrBxalf|GcCrX}A|Nu@jI}@pMkBtZ{@x^_Afj@Inn@`@veB"}],"summary":{"has_time_restrictions":false,"min_lat":60.534715,"min_lon":-149.54858,"max_lat":60.535008,"max_lon":-149.543469,"time":11.487,"length":0.176,"cost":15.508},"status_message":"Found route between points","status":0,"units":"miles","language":"en-US"}};

const nearestRoadsRequest: NearestRoadsRequest = {
    locations: [
        {
            lat: 59.436884,
            lon: 24.742595
        }
    ],
    verbose: true
};

const nearestRoadsMockRes = [{"input_lon":24.742595,"nodes":[],"input_lat":59.436884,"edges":[{"correlated_lon":24.742630,"side_of_street":"neither","linear_reference":"KxGYOypEIXriAAAcABo6Uow=","percent_along":0.54802,"outbound_reach":50,"distance":2.2,"edge_info":{"mean_elevation":36,"shape":"{zvjpBwtden@zG`H~EdG","names":["Rataskaevu"],"bike_network":{"mountain":false,"local":false,"regional":false,"national":false},"way_id":4853850},"edge":{"sidewalk_left":false,"sidewalk_right":false,"lane_count":1,"stop_sign":false,"sac_scale":"none","yield_sign":false,"not_thru":false,"forward":false,"end_node":{"value":99999091346,"id":2980,"tile_id":860498,"level":2},"truck_route":false,"speeds":{"predicted":false,"constrained_flow":0,"free_flow":0,"type":"classified","default":20},"bike_network":false,"round_about":false,"traffic_signal":false,"access_restriction":false,"destination_only":false,"geo_attributes":{"curvature":5,"max_down_slope":-7.00,"max_up_slope":0.00,"weighted_grade":-6.67,"length":32},"start_restriction":{"golf_cart":false,"truck":false,"pedestrian":false,"wheelchair":false,"taxi":false,"emergency":false,"motorcycle":false,"car":false,"moped":false,"bus":false,"bicycle":false},"cycle_lane":"none","end_restriction":{"golf_cart":false,"truck":false,"pedestrian":false,"wheelchair":false,"taxi":false,"emergency":false,"motorcycle":false,"car":false,"moped":false,"bus":false,"bicycle":false},"seasonal":false,"country_crossing":false,"part_of_complex_restriction":false,"has_sign":false,"access":{"golf_cart":true,"truck":true,"pedestrian":true,"wheelchair":true,"taxi":true,"emergency":false,"motorcycle":true,"car":true,"moped":true,"bus":true,"bicycle":true},"bridge":false,"classification":{"internal":false,"link":false,"surface":"paved","use":"living_street","classification":"service_other"},"toll":false,"tunnel":false},"heading":30.0,"inbound_reach":50,"correlated_lat":59.436875,"edge_id":{"value":63525423762,"id":1893,"tile_id":860498,"level":2},"predicted_speeds":[]},{"correlated_lon":24.742630,"side_of_street":"neither","linear_reference":"KxGYSCpELHryAP/l/+k6QnM=","percent_along":0.45198,"outbound_reach":50,"distance":2.2,"edge_info":{"mean_elevation":36,"shape":"{zvjpBwtden@zG`H~EdG","names":["Rataskaevu"],"bike_network":{"mountain":false,"local":false,"regional":false,"national":false},"way_id":4853850},"edge":{"sidewalk_left":false,"sidewalk_right":false,"lane_count":1,"stop_sign":false,"sac_scale":"none","yield_sign":false,"not_thru":false,"forward":true,"end_node":{"value":28326824594,"id":844,"tile_id":860498,"level":2},"truck_route":false,"speeds":{"predicted":false,"constrained_flow":0,"free_flow":0,"type":"classified","default":20},"bike_network":false,"round_about":false,"traffic_signal":false,"access_restriction":false,"destination_only":false,"geo_attributes":{"curvature":5,"max_down_slope":0.00,"max_up_slope":7.00,"weighted_grade":6.67,"length":32},"start_restriction":{"golf_cart":false,"truck":false,"pedestrian":false,"wheelchair":false,"taxi":false,"emergency":false,"motorcycle":false,"car":false,"moped":false,"bus":false,"bicycle":false},"cycle_lane":"none","end_restriction":{"golf_cart":false,"truck":false,"pedestrian":false,"wheelchair":false,"taxi":false,"emergency":false,"motorcycle":false,"car":false,"moped":false,"bus":false,"bicycle":false},"seasonal":false,"country_crossing":false,"part_of_complex_restriction":false,"has_sign":false,"access":{"golf_cart":true,"truck":true,"pedestrian":true,"wheelchair":true,"taxi":true,"emergency":false,"motorcycle":true,"car":true,"moped":true,"bus":true,"bicycle":true},"bridge":false,"classification":{"internal":false,"link":false,"surface":"paved","use":"living_street","classification":"service_other"},"toll":false,"tunnel":false},"heading":210.0,"inbound_reach":50,"correlated_lat":59.436875,"edge_id":{"value":257402931858,"id":7671,"tile_id":860498,"level":2},"predicted_speeds":[]}]}];

const matrixRequest: MatrixRequest = {
    id: "foobar",
    sources: [
        {
            lat: 40.744014,
            lon: -73.990508
        }
    ],
    targets: [
        {
            lat: 40.744014,
            lon: -73.990508
        },
        {
            lat: 40.739735,
            lon: -73.979713
        },
        {
            lat: 40.752522,
            lon: -73.985015
        },
        {
            lat: 40.750117,
            lon: -73.983704
        },
        {
            lat: 40.750552,
            lon: -73.993519
        }
    ],
    costing: "pedestrian"
}

const matrixMockRes = {"units":"kilometers","sources":[[{"lon":-73.990508,"lat":40.744014}]],"targets":[[{"lon":-73.990508,"lat":40.744014},{"lon":-73.979713,"lat":40.739735},{"lon":-73.985015,"lat":40.752522},{"lon":-73.983704,"lat":40.750117},{"lon":-73.993519,"lat":40.750552}]],"sources_to_targets":[[{"distance":0,"time":0,"to_index":0,"from_index":0},{"distance":1.126,"time":829,"to_index":1,"from_index":0},{"distance":1.327,"time":969,"to_index":2,"from_index":0},{"distance":1.134,"time":840,"to_index":3,"from_index":0},{"distance":1.355,"time":986,"to_index":4,"from_index":0}]]};

const isochroneRequest: IsochroneRequest = {
    id: "kesklinn",
    locations: [
        {
            lat: 59.436884,
            lon: 24.742595
        }
    ],
    costing: "pedestrian",
    contours: [
        {
            time: 5,
            color: "aabbcc"
        }
    ],
    polygons: true
};

const isochroneMockRes = {"features":[{"properties":{"fill":"#ff0000","fillOpacity":0.33,"fillColor":"#ff0000","color":"#ff0000","contour":15,"opacity":0.33,"metric":"time"},"geometry":{"coordinates":[[-73.985021,40.753501],[-73.983892,40.75163],[-73.982508,40.751546],[-73.981969,40.751014],[-73.977881,40.739014],[-73.979577,40.738083],[-73.980361,40.737014],[-73.988508,40.73467],[-73.990508,40.733708],[-73.991514,40.734008],[-73.994628,40.733894],[-73.995388,40.734134],[-73.995662,40.73486],[-73.996508,40.735006],[-73.998508,40.734576],[-74.003292,40.746014],[-74.004016,40.749014],[-74.002508,40.749907],[-73.993508,40.751786],[-73.987508,40.75397],[-73.985021,40.753501]],"type":"LineString"},"type":"Feature"}],"type":"FeatureCollection"};

const mapMatchRequest: MapMatchRequest = {
    id: "mapMatch",
    encodedPolyline: "_grbgAh~{nhF?lBAzBFvBHxBEtBKdB?fB@dBZdBb@hBh@jBb@x@\\|@x@pB\\x@v@hBl@nBPbCXtBn@|@z@ZbAEbAa@~@q@z@QhA]pAUpAVhAPlAWtASpAAdA[dASdAQhAIlARjANnAZhAf@n@`A?lB^nCRbA\\xB`@vBf@tBTbCFbARzBZvBThBRnBNrBP`CHbCF`CNdCb@vBX`ARlAJfADhA@dAFdAP`AR`Ah@hBd@bBl@rBV|B?vB]tBCvBBhAF`CFnBXtAVxAVpAVtAb@|AZ`Bd@~BJfA@fAHdADhADhABjAGzAInAAjAB|BNbCR|BTjBZtB`@lBh@lB\\|Bl@rBXtBN`Al@g@t@?nAA~AKvACvAAlAMdAU`Ac@hAShAI`AJ`AIdAi@bAu@|@k@p@]p@a@bAc@z@g@~@Ot@Bz@f@X`BFtBXdCLbAf@zBh@fBb@xAb@nATjAKjAW`BI|AEpAHjAPdAAfAGdAFjAv@p@XlAVnA?~A?jAInAPtAVxAXnAf@tBDpBJpBXhBJfBDpAZ|Ax@pAz@h@~@lA|@bAnAd@hAj@tAR~AKxAc@xAShA]hAIdAAjA]~A[v@BhB?dBSv@Ct@CvAI~@Oz@Pv@dAz@lAj@~A^`B^|AXvAVpAXdBh@~Ap@fCh@hB\\zBN`Aj@xBFdA@jALbAPbAJdAHdAJbAHbAHfAJhALbA\\lBTvBAdC@bC@jCKjASbC?`CM`CDpB\\xAj@tB\\fA\\bAVfAJdAJbAXz@L|BO`AOdCDdA@~B\\z@l@v@l@v@l@r@j@t@b@x@b@r@z@jBVfCJdAJdANbCPfCF|BRhBS~BS`AYbAe@~BQdA",
    shapeMatch: MapMatchRequestShapeMatchEnum.MapSnap,
    costing: "pedestrian",
    directionsOptions: {
        units: DistanceUnit.Mi
    },
    linearReferences: true
};

const mapMatchMockRes = {"trip":{"locations":[{"type":"break","lat":37.807744,"lon":-122.4197},{"type":"break","lat":37.803694,"lon":-122.428416}],"legs":[{"maneuvers":[{"type":1,"instruction":"Walk west on the walkway.","verbal_pre_transition_instruction":"Walk west on the walkway.","verbal_post_transition_instruction":"Continue for 200 feet.","time":44.733,"length":0.039,"cost":44.733,"begin_shape_index":0,"end_shape_index":1,"travel_mode":"pedestrian","travel_type":"foot"},{"type":15,"instruction":"Turn left.","verbal_transition_alert_instruction":"Turn left.","verbal_pre_transition_instruction":"Turn left. Then Turn right onto Jefferson Street.","verbal_post_transition_instruction":"Continue for 20 feet.","time":4.941,"length":0.004,"cost":4.941,"begin_shape_index":1,"end_shape_index":2,"verbal_multi_cue":true,"travel_mode":"pedestrian","travel_type":"foot"},{"type":10,"instruction":"Turn right onto Jefferson Street.","verbal_transition_alert_instruction":"Turn right onto Jefferson Street.","verbal_pre_transition_instruction":"Turn right onto Jefferson Street.","verbal_post_transition_instruction":"Continue for 80 feet.","street_names":["Jefferson Street"],"time":16.941,"length":0.014,"cost":21.941,"begin_shape_index":2,"end_shape_index":3,"travel_mode":"pedestrian","travel_type":"foot"},{"type":15,"instruction":"Turn left onto the walkway.","verbal_transition_alert_instruction":"Turn left onto the walkway.","verbal_pre_transition_instruction":"Turn left onto the walkway. Then Turn right onto the walkway.","verbal_post_transition_instruction":"Continue for 20 feet.","time":4.941,"length":0.004,"cost":9.941,"begin_shape_index":3,"end_shape_index":4,"verbal_multi_cue":true,"travel_mode":"pedestrian","travel_type":"foot"},{"type":10,"instruction":"Turn right onto the walkway.","verbal_transition_alert_instruction":"Turn right onto the walkway.","verbal_pre_transition_instruction":"Turn right onto the walkway. Then Turn left onto Hyde Street.","verbal_post_transition_instruction":"Continue for 30 feet.","time":6.352,"length":0.005,"cost":6.352,"begin_shape_index":4,"end_shape_index":5,"verbal_multi_cue":true,"travel_mode":"pedestrian","travel_type":"foot"},{"type":15,"instruction":"Turn left onto Hyde Street.","verbal_transition_alert_instruction":"Turn left onto Hyde Street.","verbal_pre_transition_instruction":"Turn left onto Hyde Street.","verbal_post_transition_instruction":"Continue for 300 feet.","street_names":["Hyde Street"],"time":58.588,"length":0.051,"cost":63.588,"begin_shape_index":5,"end_shape_index":10,"travel_mode":"pedestrian","travel_type":"foot"},{"type":10,"instruction":"Turn right onto the walkway.","verbal_transition_alert_instruction":"Turn right onto the walkway.","verbal_pre_transition_instruction":"Turn right onto the walkway. Then Turn left onto the walkway.","verbal_post_transition_instruction":"Continue for 30 feet.","time":6.352,"length":0.005,"cost":11.352,"begin_shape_index":10,"end_shape_index":11,"rough":true,"verbal_multi_cue":true,"travel_mode":"pedestrian","travel_type":"foot"},{"type":15,"instruction":"Turn left onto the walkway.","verbal_transition_alert_instruction":"Turn left onto the walkway.","verbal_pre_transition_instruction":"Turn left onto the walkway.","verbal_post_transition_instruction":"Continue for 400 feet.","time":93.176,"length":0.082,"cost":93.176,"begin_shape_index":11,"end_shape_index":17,"rough":true,"travel_mode":"pedestrian","travel_type":"foot"},{"type":15,"instruction":"Turn left onto the walkway.","verbal_transition_alert_instruction":"Turn left onto the walkway.","verbal_pre_transition_instruction":"Turn left onto the walkway. Then Turn right onto Beach Street.","verbal_post_transition_instruction":"Continue for 40 feet.","time":7.764,"length":0.006,"cost":7.764,"begin_shape_index":17,"end_shape_index":18,"rough":true,"verbal_multi_cue":true,"travel_mode":"pedestrian","travel_type":"foot"},{"type":10,"instruction":"Turn right onto Beach Street.","verbal_transition_alert_instruction":"Turn right onto Beach Street.","verbal_pre_transition_instruction":"Turn right onto Beach Street.","verbal_post_transition_instruction":"Continue for 500 feet.","street_names":["Beach Street"],"time":110.705,"length":0.095,"cost":115.705,"begin_shape_index":18,"end_shape_index":24,"travel_mode":"pedestrian","travel_type":"foot"},{"type":15,"instruction":"Turn left onto Polk Street.","verbal_transition_alert_instruction":"Turn left onto Polk Street.","verbal_pre_transition_instruction":"Turn left onto Polk Street.","verbal_post_transition_instruction":"Continue for 300 feet.","street_names":["Polk Street"],"time":68.058,"length":0.059,"cost":73.058,"begin_shape_index":24,"end_shape_index":27,"travel_mode":"pedestrian","travel_type":"foot"},{"type":10,"instruction":"Turn right onto the walkway.","verbal_transition_alert_instruction":"Turn right onto the walkway.","verbal_pre_transition_instruction":"Turn right onto the walkway.","verbal_post_transition_instruction":"Continue for 400 feet.","time":98,"length":0.084,"cost":103,"begin_shape_index":27,"end_shape_index":32,"rough":true,"travel_mode":"pedestrian","travel_type":"foot"},{"type":15,"instruction":"Turn left onto Van Ness Avenue.","verbal_transition_alert_instruction":"Turn left onto Van Ness Avenue.","verbal_pre_transition_instruction":"Turn left onto Van Ness Avenue.","verbal_post_transition_instruction":"Continue for 400 feet.","street_names":["Van Ness Avenue"],"time":83.294,"length":0.073,"cost":98.294,"begin_shape_index":32,"end_shape_index":38,"travel_mode":"pedestrian","travel_type":"foot"},{"type":10,"instruction":"Turn right onto the walkway.","verbal_transition_alert_instruction":"Turn right onto the walkway.","verbal_pre_transition_instruction":"Turn right onto the walkway. Then Turn left onto the walkway.","verbal_post_transition_instruction":"Continue for 30 feet.","time":7.058,"length":0.006,"cost":12.058,"begin_shape_index":38,"end_shape_index":39,"rough":true,"verbal_multi_cue":true,"travel_mode":"pedestrian","travel_type":"foot"},{"type":15,"instruction":"Turn left onto the walkway.","verbal_transition_alert_instruction":"Turn left onto the walkway.","verbal_pre_transition_instruction":"Turn left onto the walkway. Then Turn right onto Bay Street.","verbal_post_transition_instruction":"Continue for 50 feet.","time":9.882,"length":0.008,"cost":9.882,"begin_shape_index":39,"end_shape_index":40,"rough":true,"verbal_multi_cue":true,"travel_mode":"pedestrian","travel_type":"foot"},{"type":10,"instruction":"Turn right onto Bay Street.","verbal_transition_alert_instruction":"Turn right onto Bay Street.","verbal_pre_transition_instruction":"Turn right onto Bay Street.","verbal_post_transition_instruction":"Continue for 900 feet.","street_names":["Bay Street"],"time":194.823,"length":0.171,"cost":199.823,"begin_shape_index":40,"end_shape_index":45,"travel_mode":"pedestrian","travel_type":"foot"},{"type":15,"instruction":"Turn left onto Gough Street.","verbal_transition_alert_instruction":"Turn left onto Gough Street.","verbal_pre_transition_instruction":"Turn left onto Gough Street. Then You will arrive at your destination.","verbal_post_transition_instruction":"Continue for 20 feet.","street_names":["Gough Street"],"time":3.302,"length":0.002,"cost":8.302,"begin_shape_index":45,"end_shape_index":46,"verbal_multi_cue":true,"travel_mode":"pedestrian","travel_type":"foot"},{"type":4,"instruction":"You have arrived at your destination.","verbal_transition_alert_instruction":"You will arrive at your destination.","verbal_pre_transition_instruction":"You have arrived at your destination.","time":0,"length":0,"cost":0,"begin_shape_index":46,"end_shape_index":46,"travel_mode":"pedestrian","travel_type":"foot"}],"summary":{"has_time_restrictions":false,"min_lat":37.803694,"min_lon":-122.428418,"max_lat":37.807771,"max_lon":-122.419706,"time":818.918,"length":0.716,"cost":883.918},"shape":"uhrbgAt~{nhFrDhk@rBWfAbPvBWXfElAQhAi@dA]d[oDvIaAs@~Dp@n@r@r@^\\jAnQfDdh@lBtY`Eg@VzDXxDxAdPrD~j@zBf]TpD|C_@`\\uD|QaCZtE`Cp\\|A|UdCz^N`ClDJj@dJdDo@vGw@dKmAzWcDRdFpFq@d@dHpH`kAVbEXhEdKj_BpAO"}],"linear_references":["C6jyLBrisjr3Af+4//g6BA==","C6jyCxrirjr3AAAA//s6Bw==","C6jyDBriqyKUAP/j//0iAg==","C6jx/xriqTr3AAAA//w6Ag==","C6jx/xripjr0AP/2AAE6Hg==","C6jx+xripiKUAQAM/8kiHw==","C6jyARrijCKPAAAC/+8iBg==","C6jyAxrihDrvAP/0AAM6BQ==","C6jx/hrihTrzAP/5//o6Bw==","C6jx+xrigjr1AP/h//06Bw==","C6jx7RrigDr3Af++//k6Bw==","C6jxzxrifDr3AP/T//w6Ag==","C6jxuxrieTr3AAAA//g6Bw==","C6jxvBridTLSAP/1AAAyBw==","C6jxtxridDLSAP/2AAEyBg==","C6jxsxridDLWAf+d//MyBw==","C6jxhRribjLXAP/P//oyAg==","C6jxbxriazLXAP/1//8yHw==","C6jxaxriajLXAP////kyHw==","C6jxaxriZjLTAAAJ/9MyHw==","C6jxbxriUTLPAAAG/+IyBw==","C6jxcxriQzrvAP/z//86Bw==","C6jxbhriQjryAP/P//s6Bw==","C6jxVxriPzr3AP/b//w6Bw==","C6jxRhriPTr3AP/N//o6Aw==","C6jxLxriOjr3AP/4AAA6Aw==","C6jxLBriOTLXAP/9//kyBQ==","C6jxKxriNSKTAP/u//8iHw==","C6jxIxriNCKWAAAE/+siHw==","C6jxJRriKiKPAAAE/+0iHw==","C6jxJxriISKPAAAI/9kiAw==","C6jxKxriDjrvAP/0AAA6AQ==","C6jxJhriDjrzAAAB//Q6Bw==","C6jxJxriCBpxAv9s/+8aBw==","C6jw4xrh/xp3Av9a/+0aBQ==","C6jwlhrh9jLXAAAA//0yBQ=="],"summary":{"has_time_restrictions":false,"min_lat":37.803694,"min_lon":-122.428418,"max_lat":37.807771,"max_lon":-122.419706,"time":818.918,"length":0.716,"cost":883.918},"status_message":"Found route between points","status":0,"units":"miles","language":"en-US"}};

const traceAttributesRequest: TraceAttributesRequest = {
    id: "trace",
    encodedPolyline: "_grbgAh~{nhF?lBAzBFvBHxBEtBKdB?fB@dBZdBb@hBh@jBb@x@\\|@x@pB\\x@v@hBl@nBPbCXtBn@|@z@ZbAEbAa@~@q@z@QhA]pAUpAVhAPlAWtASpAAdA[dASdAQhAIlARjANnAZhAf@n@`A?lB^nCRbA\\xB`@vBf@tBTbCFbARzBZvBThBRnBNrBP`CHbCF`CNdCb@vBX`ARlAJfADhA@dAFdAP`AR`Ah@hBd@bBl@rBV|B?vB]tBCvBBhAF`CFnBXtAVxAVpAVtAb@|AZ`Bd@~BJfA@fAHdADhADhABjAGzAInAAjAB|BNbCR|BTjBZtB`@lBh@lB\\|Bl@rBXtBN`Al@g@t@?nAA~AKvACvAAlAMdAU`Ac@hAShAI`AJ`AIdAi@bAu@|@k@p@]p@a@bAc@z@g@~@Ot@Bz@f@X`BFtBXdCLbAf@zBh@fBb@xAb@nATjAKjAW`BI|AEpAHjAPdAAfAGdAFjAv@p@XlAVnA?~A?jAInAPtAVxAXnAf@tBDpBJpBXhBJfBDpAZ|Ax@pAz@h@~@lA|@bAnAd@hAj@tAR~AKxAc@xAShA]hAIdAAjA]~A[v@BhB?dBSv@Ct@CvAI~@Oz@Pv@dAz@lAj@~A^`B^|AXvAVpAXdBh@~Ap@fCh@hB\\zBN`Aj@xBFdA@jALbAPbAJdAHdAJbAHbAHfAJhALbA\\lBTvBAdC@bC@jCKjASbC?`CM`CDpB\\xAj@tB\\fA\\bAVfAJdAJbAXz@L|BO`AOdCDdA@~B\\z@l@v@l@v@l@r@j@t@b@x@b@r@z@jBVfCJdAJdANbCPfCF|BRhBS~BS`AYbAe@~BQdA",
    shapeMatch: "map_snap",
    costing: "pedestrian",
    directionsOptions: {
        units: DistanceUnit.Mi
    }
};

const traceAttributesMockRes = {"units":"miles","osm_changeset":136640737,"shape":"uhrbgAt~{nhFrDhk@rBWfAbPvBWXfElAQhAi@dA]d[oDvIaAs@~Dp@n@r@r@^\\jAnQfDdh@lBtY`Eg@VzDXxDxAdPrD~j@zBf]TpD|C_@`\\uD|QaCZtEfAlOx@lL`BbWx@hLfA`PDv@HhAlDJj@dJdDo@vGw@dKmApXiD\\|FrEq@b@rGpH`kAVbEXhEdKj_BpAO","confidence_score":1.0,"raw_score":88.13,"admins":[{"country_code":"US","country_text":"United States","state_code":"CA","state_text":"California"}],"edges":[{"truck_route":false,"density":7,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":1,"weighted_grade":0.0,"mean_elevation":6,"way_id":675540398,"id":5129572571698,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"footway","traversability":"both","end_shape_index":1,"begin_shape_index":0,"end_heading":261,"begin_heading":261,"road_class":"service_other","speed":3,"length":0.039,"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":351,"use":"service_road","road_class":"service_other"},{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":260,"use":"footway","road_class":"service_other"}],"elapsed_time":44.733,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":7,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":6,"way_id":28518703,"id":5128800819762,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"service_road","traversability":"both","end_shape_index":2,"begin_shape_index":1,"end_heading":171,"begin_heading":171,"road_class":"service_other","speed":3,"length":0.004,"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":true,"begin_heading":82,"use":"road","road_class":"tertiary"}],"elapsed_time":49.674,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":7,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":1,"cycle_lane":"none","lane_count":1,"max_downward_grade":-1,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":6,"way_id":27570802,"id":1625477715593,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":3,"begin_shape_index":2,"end_heading":261,"begin_heading":261,"road_class":"tertiary","speed":3,"length":0.014,"names":["Jefferson Street"],"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":false,"begin_heading":270,"use":"road","road_class":"tertiary"},{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":true,"begin_heading":352,"use":"pedestrian_crossing","road_class":"service_other"}],"elapsed_time":66.615,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":7,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":6,"way_id":675540403,"id":2941655833138,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"pedestrian_crossing","traversability":"both","end_shape_index":4,"begin_shape_index":3,"end_heading":171,"begin_heading":171,"road_class":"service_other","speed":3,"length":0.004,"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":163,"use":"footway","road_class":"service_other"},{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":82,"use":"footway","road_class":"service_other"}],"elapsed_time":71.556,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":7,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":6,"way_id":675540292,"id":5128700156466,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"pedestrian_crossing","traversability":"both","end_shape_index":5,"begin_shape_index":4,"end_heading":261,"begin_heading":261,"road_class":"service_other","speed":3,"length":0.005,"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":false,"begin_heading":259,"use":"pedestrian_crossing","road_class":"service_other"},{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":true,"begin_heading":352,"use":"road","road_class":"tertiary"}],"elapsed_time":77.909,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":7,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":10,"weighted_grade":10.0,"mean_elevation":19,"way_id":417233181,"id":1886229206665,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":9,"begin_shape_index":5,"end_heading":171,"begin_heading":166,"road_class":"tertiary","speed":2,"length":0.039,"names":["Hyde Street"],"end_node":{"elapsed_time":160.582,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":6,"weighted_grade":5.0,"mean_elevation":26,"way_id":417233183,"id":1953908496009,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":10,"begin_shape_index":9,"end_heading":171,"begin_heading":171,"road_class":"tertiary","speed":2,"length":0.011,"names":["Hyde Street"],"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":false,"begin_heading":166,"use":"road","road_class":"tertiary"},{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":true,"begin_heading":107,"use":"pedestrian_crossing","road_class":"service_other"}],"elapsed_time":178.42,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":32,"way_id":675540284,"id":2942930901554,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"pedestrian_crossing","traversability":"both","end_shape_index":11,"begin_shape_index":10,"end_heading":289,"begin_heading":289,"road_class":"service_other","speed":3,"length":0.005,"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":351,"use":"footway","road_class":"service_other"}],"elapsed_time":184.773,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":32,"way_id":675540387,"id":5133632657970,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"pedestrian_crossing","traversability":"both","end_shape_index":14,"begin_shape_index":11,"end_heading":217,"begin_heading":217,"road_class":"service_other","speed":3,"length":0.005,"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":156,"use":"pedestrian_crossing","road_class":"service_other"}],"elapsed_time":191.126,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":-3,"max_upward_grade":0,"weighted_grade":-1.666,"mean_elevation":32,"way_id":675540389,"id":5133733321266,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"compacted","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":true,"toll":false,"use":"footway","traversability":"both","end_shape_index":15,"begin_shape_index":14,"end_heading":261,"begin_heading":261,"road_class":"service_other","speed":3,"length":0.016,"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":349,"use":"steps","road_class":"service_other"}],"elapsed_time":210.58,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":-1,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":32,"way_id":675540389,"id":5133498440242,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"compacted","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":true,"toll":false,"use":"footway","traversability":"both","end_shape_index":16,"begin_shape_index":15,"end_heading":261,"begin_heading":261,"road_class":"service_other","speed":3,"length":0.036,"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":351,"use":"footway","road_class":"service_other"}],"elapsed_time":252.227,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":-3,"max_upward_grade":0,"weighted_grade":-3.333,"mean_elevation":26,"way_id":675540389,"id":5133397776946,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"compacted","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":true,"toll":false,"use":"footway","traversability":"both","end_shape_index":17,"begin_shape_index":16,"end_heading":261,"begin_heading":261,"road_class":"service_other","speed":3,"length":0.023,"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":260,"use":"footway","road_class":"service_other"}],"elapsed_time":282.269,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":26,"way_id":675540371,"id":5133062232626,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"pedestrian_crossing","traversability":"both","end_shape_index":18,"begin_shape_index":17,"end_heading":171,"begin_heading":171,"road_class":"service_other","speed":3,"length":0.006,"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":true,"begin_heading":82,"use":"road","road_class":"residential"},{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":false,"begin_heading":170,"use":"pedestrian_crossing","road_class":"service_other"}],"elapsed_time":290.034,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":26,"way_id":91185847,"id":5133196450354,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":19,"begin_shape_index":18,"end_heading":261,"begin_heading":261,"road_class":"residential","speed":3,"length":0.004,"names":["Beach Street"],"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":170,"use":"road","road_class":"residential"}],"elapsed_time":295.681,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":26,"way_id":225847502,"id":741223291442,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":20,"begin_shape_index":19,"end_heading":260,"begin_heading":260,"road_class":"residential","speed":3,"length":0.004,"names":["Beach Street"],"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":170,"use":"pedestrian_crossing","road_class":"service_other"},{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":351,"use":"pedestrian_crossing","road_class":"service_other"}],"elapsed_time":301.328,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":1.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":1,"weighted_grade":0.0,"mean_elevation":26,"way_id":225847502,"id":5132961569330,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":22,"begin_shape_index":20,"end_heading":261,"begin_heading":258,"road_class":"residential","speed":3,"length":0.054,"names":["Beach Street"],"end_node":{"elapsed_time":363.74,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":-4,"max_upward_grade":0,"weighted_grade":-3.333,"mean_elevation":26,"way_id":425516688,"id":1839761840690,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":23,"begin_shape_index":22,"end_heading":261,"begin_heading":261,"road_class":"residential","speed":3,"length":0.026,"names":["Beach Street"],"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":170,"use":"pedestrian_crossing","road_class":"service_other"},{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":351,"use":"pedestrian_crossing","road_class":"service_other"}],"elapsed_time":397.735,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":1.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":19,"way_id":425516688,"id":5130780531250,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":24,"begin_shape_index":23,"end_heading":261,"begin_heading":261,"road_class":"residential","speed":3,"length":0.004,"names":["Beach Street"],"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":false,"begin_heading":260,"use":"road","road_class":"residential"}],"elapsed_time":404.382,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"speed_limit":25,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"dedicated","lane_count":1,"max_downward_grade":0,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":19,"way_id":133781783,"id":741323954738,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":25,"begin_shape_index":24,"end_heading":171,"begin_heading":171,"road_class":"residential","speed":3,"length":0.005,"names":["Polk Street"],"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":260,"use":"pedestrian_crossing","road_class":"service_other"},{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":80,"use":"pedestrian_crossing","road_class":"service_other"}],"elapsed_time":410.735,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":1.0}},{"truck_route":false,"speed_limit":25,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"dedicated","lane_count":1,"max_downward_grade":0,"max_upward_grade":20,"weighted_grade":14.999,"mean_elevation":39,"way_id":133781783,"id":5130646313522,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":26,"begin_shape_index":25,"end_heading":171,"begin_heading":171,"road_class":"residential","speed":1,"length":0.032,"names":["Polk Street"],"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":260,"use":"driveway","road_class":"service_other"}],"elapsed_time":503.5,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"speed_limit":25,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"dedicated","lane_count":1,"max_downward_grade":0,"max_upward_grade":7,"weighted_grade":6.666,"mean_elevation":52,"way_id":133781783,"id":3477754993202,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":27,"begin_shape_index":26,"end_heading":170,"begin_heading":170,"road_class":"residential","speed":2,"length":0.021,"names":["Polk Street"],"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":false,"begin_heading":170,"use":"road","road_class":"residential"},{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":true,"begin_heading":82,"use":"pedestrian_crossing","road_class":"service_other"}],"elapsed_time":537.82,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":6,"weighted_grade":5.0,"mean_elevation":59,"way_id":739592414,"id":5531286231602,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"pedestrian_crossing","traversability":"both","end_shape_index":28,"begin_shape_index":27,"end_heading":261,"begin_heading":261,"road_class":"service_other","speed":2,"length":0.006,"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":170,"use":"pedestrian_crossing","road_class":"service_other"},{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":351,"use":"footway","road_class":"service_other"}],"elapsed_time":547.208,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":1.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":1,"weighted_grade":0.0,"mean_elevation":59,"way_id":775118912,"id":5532158646834,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"compacted","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":true,"toll":false,"use":"footway","traversability":"both","end_shape_index":29,"begin_shape_index":28,"end_heading":260,"begin_heading":260,"road_class":"service_other","speed":3,"length":0.014,"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":169,"use":"driveway","road_class":"service_other"},{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":291,"use":"driveway","road_class":"service_other"}],"elapsed_time":564.443,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":1.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":-2,"max_upward_grade":0,"weighted_grade":-1.666,"mean_elevation":59,"way_id":775118912,"id":7280680098354,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"compacted","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":true,"toll":false,"use":"footway","traversability":"both","end_shape_index":30,"begin_shape_index":29,"end_heading":260,"begin_heading":260,"road_class":"service_other","speed":3,"length":0.011,"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":170,"use":"driveway","road_class":"service_other"},{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":339,"use":"driveway","road_class":"service_other"}],"elapsed_time":579.66,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":1.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":3,"weighted_grade":1.666,"mean_elevation":59,"way_id":775118912,"id":2833644116530,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"compacted","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":true,"toll":false,"use":"footway","traversability":"both","end_shape_index":31,"begin_shape_index":30,"end_heading":261,"begin_heading":261,"road_class":"service_other","speed":3,"length":0.021,"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":353,"use":"driveway","road_class":"service_other"},{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":170,"use":"driveway","road_class":"service_other"}],"elapsed_time":607.06,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":1.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":3,"weighted_grade":1.666,"mean_elevation":65,"way_id":775118912,"id":2833778334258,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"compacted","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":true,"toll":false,"use":"footway","traversability":"both","end_shape_index":32,"begin_shape_index":31,"end_heading":260,"begin_heading":260,"road_class":"service_other","speed":3,"length":0.011,"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":45,"use":"driveway","road_class":"service_other"},{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":170,"use":"driveway","road_class":"service_other"}],"elapsed_time":622.813,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":1.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":1,"weighted_grade":0.0,"mean_elevation":65,"way_id":775118912,"id":7280243890738,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"compacted","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":true,"toll":false,"use":"footway","traversability":"both","end_shape_index":33,"begin_shape_index":32,"end_heading":261,"begin_heading":261,"road_class":"service_other","speed":3,"length":0.014,"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":351,"use":"footway","road_class":"service_other"},{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":true,"begin_heading":169,"use":"pedestrian_crossing","road_class":"service_other"}],"elapsed_time":640.754,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":1.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":65,"way_id":775118915,"id":5856529340978,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"pedestrian_crossing","traversability":"both","end_shape_index":35,"begin_shape_index":33,"end_heading":261,"begin_heading":261,"road_class":"service_other","speed":3,"length":0.003,"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"forward","driveability":"forward","from_edge_name_consistency":false,"to_edge_name_consistency":true,"begin_heading":351,"use":"road","road_class":"residential"},{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":false,"begin_heading":260,"use":"pedestrian_crossing","road_class":"service_other"}],"elapsed_time":645.989,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":1,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":4,"weighted_grade":3.333,"mean_elevation":65,"way_id":26987989,"id":2927562971698,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":36,"begin_shape_index":35,"end_heading":183,"begin_heading":183,"road_class":"residential","speed":3,"length":0.006,"names":["Van Ness Avenue"],"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":true,"begin_heading":82,"use":"road","road_class":"tertiary"},{"walkability":"both","cyclability":"backward","driveability":"backward","from_edge_name_consistency":true,"to_edge_name_consistency":false,"begin_heading":179,"use":"road","road_class":"tertiary"}],"elapsed_time":654.46,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"speed_limit":25,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":1,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":15,"weighted_grade":13.333,"mean_elevation":65,"way_id":34128720,"id":1553000142473,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":true,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":37,"begin_shape_index":36,"end_heading":261,"begin_heading":261,"road_class":"tertiary","speed":1,"length":0.009,"names":["North Point Street"],"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"backward","driveability":"backward","from_edge_name_consistency":false,"to_edge_name_consistency":true,"begin_heading":344,"use":"road","road_class":"residential"}],"elapsed_time":679.646,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":8,"sac_scale":0,"shoulder":false,"sidewalk":"right","bicycle_network":0,"cycle_lane":"none","lane_count":3,"max_downward_grade":0,"max_upward_grade":2,"weighted_grade":1.666,"mean_elevation":72,"way_id":680783335,"id":1415259199113,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":39,"begin_shape_index":37,"end_heading":170,"begin_heading":169,"road_class":"tertiary","speed":3,"length":0.015,"names":["Van Ness Avenue"],"end_node":{"elapsed_time":699.058,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":9,"sac_scale":0,"shoulder":false,"sidewalk":"right","bicycle_network":0,"cycle_lane":"none","lane_count":3,"max_downward_grade":0,"max_upward_grade":2,"weighted_grade":1.666,"mean_elevation":72,"way_id":680783333,"id":2260797331081,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":40,"begin_shape_index":39,"end_heading":171,"begin_heading":171,"road_class":"tertiary","speed":3,"length":0.013,"names":["Van Ness Avenue"],"end_node":{"elapsed_time":716.14,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":9,"sac_scale":0,"shoulder":false,"sidewalk":"right","bicycle_network":0,"cycle_lane":"none","lane_count":3,"max_downward_grade":0,"max_upward_grade":4,"weighted_grade":3.333,"mean_elevation":78,"way_id":26987990,"id":2260730222217,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":41,"begin_shape_index":40,"end_heading":171,"begin_heading":171,"road_class":"tertiary","speed":3,"length":0.028,"names":["Van Ness Avenue"],"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"forward","driveability":"forward","from_edge_name_consistency":true,"to_edge_name_consistency":false,"begin_heading":172,"use":"road","road_class":"tertiary"},{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":true,"begin_heading":82,"use":"pedestrian_crossing","road_class":"service_other"}],"elapsed_time":755.105,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":9,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":2,"weighted_grade":1.666,"mean_elevation":78,"way_id":775118922,"id":3380044487218,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"pedestrian_crossing","traversability":"both","end_shape_index":42,"begin_shape_index":41,"end_heading":261,"begin_heading":261,"road_class":"service_other","speed":3,"length":0.006,"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":351,"use":"footway","road_class":"service_other"}],"elapsed_time":763.646,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"density":9,"sac_scale":0,"shoulder":false,"sidewalk":"none","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":0,"max_upward_grade":3,"weighted_grade":1.666,"mean_elevation":85,"way_id":775118919,"id":5858139953714,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"pedestrian_crossing","traversability":"both","end_shape_index":43,"begin_shape_index":42,"end_heading":169,"begin_heading":169,"road_class":"service_other","speed":3,"length":0.007,"end_node":{"intersecting_edges":[{"walkability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":false,"begin_heading":170,"use":"pedestrian_crossing","road_class":"service_other"},{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":true,"begin_heading":82,"use":"road","road_class":"secondary"}],"elapsed_time":772.963,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"speed_limit":25,"density":9,"sac_scale":0,"shoulder":false,"sidewalk":"both","bicycle_network":0,"cycle_lane":"none","lane_count":2,"max_downward_grade":0,"max_upward_grade":1,"weighted_grade":0.0,"mean_elevation":85,"way_id":479850694,"id":2030882363017,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":44,"begin_shape_index":43,"end_heading":261,"begin_heading":261,"road_class":"secondary","speed":3,"length":0.007,"names":["Bay Street"],"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":352,"use":"service_road","road_class":"service_other"}],"elapsed_time":781.434,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"speed_limit":25,"density":9,"sac_scale":0,"shoulder":false,"sidewalk":"both","bicycle_network":0,"cycle_lane":"none","lane_count":2,"max_downward_grade":-3,"max_upward_grade":0,"weighted_grade":-3.333,"mean_elevation":78,"way_id":1012994252,"id":1717416859273,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":46,"begin_shape_index":44,"end_heading":261,"begin_heading":261,"road_class":"secondary","speed":3,"length":0.072,"names":["Bay Street"],"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":170,"use":"road","road_class":"residential"},{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":351,"use":"road","road_class":"residential"},{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":320,"use":"footway","road_class":"service_other"},{"walkability":"both","from_edge_name_consistency":false,"to_edge_name_consistency":false,"begin_heading":25,"use":"footway","road_class":"service_other"}],"elapsed_time":873.933,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"speed_limit":25,"density":9,"sac_scale":0,"shoulder":false,"sidewalk":"left","bicycle_network":0,"cycle_lane":"none","lane_count":2,"max_downward_grade":-2,"max_upward_grade":0,"weighted_grade":-1.666,"mean_elevation":65,"way_id":85644937,"id":1306509285001,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":48,"begin_shape_index":46,"end_heading":261,"begin_heading":261,"road_class":"secondary","speed":3,"length":0.09,"names":["Bay Street"],"end_node":{"intersecting_edges":[{"walkability":"both","cyclability":"both","driveability":"both","from_edge_name_consistency":true,"to_edge_name_consistency":false,"begin_heading":260,"use":"road","road_class":"secondary"}],"elapsed_time":983.175,"admin_index":0,"type":"street_intersection","fork":false,"time_zone":"America/Los_Angeles","transition_time":0.0}},{"truck_route":false,"speed_limit":25,"density":9,"sac_scale":0,"shoulder":false,"sidewalk":"both","bicycle_network":0,"cycle_lane":"none","lane_count":1,"max_downward_grade":-1,"max_upward_grade":0,"weighted_grade":0.0,"mean_elevation":65,"way_id":8918403,"id":737901402674,"travel_mode":"pedestrian","pedestrian_type":"foot","surface":"paved_smooth","drive_on_right":true,"internal_intersection":false,"roundabout":false,"bridge":false,"tunnel":false,"unpaved":false,"toll":false,"use":"road","traversability":"both","end_shape_index":49,"begin_shape_index":48,"end_heading":171,"begin_heading":171,"road_class":"residential","speed":3,"length":0.002,"names":["Gough Street"],"end_node":{"elapsed_time":986.478,"admin_index":0,"type":"street_intersection","fork":false,"transition_time":0.0}}],"matched_points":[{"lon":-122.419706,"lat":37.807771,"type":"matched","edge_index":0,"distance_along_edge":0.41322,"distance_from_trace_point":3.064624},{"lon":-122.41976,"lat":37.807764,"type":"interpolated","edge_index":0,"distance_along_edge":0.45756,"distance_from_trace_point":2.29989},{"lon":-122.41982,"lat":37.807756,"type":"matched","edge_index":0,"distance_along_edge":0.507378,"distance_from_trace_point":1.328669},{"lon":-122.419879,"lat":37.807749,"type":"interpolated","edge_index":0,"distance_along_edge":0.556406,"distance_from_trace_point":0.931043},{"lon":-122.41994,"lat":37.807741,"type":"matched","edge_index":0,"distance_along_edge":0.606406,"distance_from_trace_point":0.628671},{"lon":-122.419997,"lat":37.807734,"type":"interpolated","edge_index":0,"distance_along_edge":0.653477,"distance_from_trace_point":0.519152},{"lon":-122.420045,"lat":37.807728,"type":"interpolated","edge_index":0,"distance_along_edge":0.693604,"distance_from_trace_point":1.883214},{"lon":-122.420096,"lat":37.807721,"type":"matched","edge_index":0,"distance_along_edge":0.735525,"distance_from_trace_point":2.606235},{"lon":-122.420146,"lat":37.807715,"type":"interpolated","edge_index":0,"distance_along_edge":0.776804,"distance_from_trace_point":3.206195},{"lon":-122.420198,"lat":37.807708,"type":"interpolated","edge_index":0,"distance_along_edge":0.820223,"distance_from_trace_point":2.387108},{"lon":-122.420253,"lat":37.807701,"type":"matched","edge_index":0,"distance_along_edge":0.865912,"distance_from_trace_point":1.159199},{"lon":-122.42031,"lat":37.807694,"type":"interpolated","edge_index":0,"distance_along_edge":0.912898,"distance_from_trace_point":0.382276},{"lon":-122.420342,"lat":37.80769,"type":"interpolated","edge_index":0,"distance_along_edge":0.93924,"distance_from_trace_point":1.943887},{"lon":-122.420415,"lat":37.80768,"type":"matched","edge_index":1,"distance_along_edge":1.0,"distance_from_trace_point":4.75546},{"lon":-122.420405,"lat":37.807631,"type":"interpolated","edge_index":1,"distance_along_edge":0.849754,"distance_from_trace_point":1.87585},{"lon":-122.420456,"lat":37.807616,"type":"interpolated","edge_index":2,"distance_along_edge":0.191385,"distance_from_trace_point":0.236449},{"lon":-122.420513,"lat":37.807608,"type":"matched","edge_index":2,"distance_along_edge":0.400566,"distance_from_trace_point":2.530881},{"lon":-122.420572,"lat":37.8076,"type":"interpolated","edge_index":2,"distance_along_edge":0.616635,"distance_from_trace_point":4.236978},{"lon":-122.42067,"lat":37.807549,"type":"matched","edge_index":3,"distance_along_edge":0.632018,"distance_from_trace_point":3.485936},{"lon":-122.420686,"lat":37.807524,"type":"interpolated","edge_index":4,"distance_along_edge":0.205096,"distance_from_trace_point":1.867791},{"lon":-122.420765,"lat":37.80751,"type":"interpolated","edge_index":5,"distance_along_edge":0.006316,"distance_from_trace_point":3.926771},{"lon":-122.420758,"lat":37.807483,"type":"matched","edge_index":5,"distance_along_edge":0.053986,"distance_from_trace_point":2.128654},{"lon":-122.420742,"lat":37.807449,"type":"interpolated","edge_index":5,"distance_along_edge":0.118233,"distance_from_trace_point":0.99744},{"lon":-122.420726,"lat":37.807415,"type":"interpolated","edge_index":5,"distance_along_edge":0.180501,"distance_from_trace_point":1.063821},{"lon":-122.420717,"lat":37.807383,"type":"matched","edge_index":5,"distance_along_edge":0.238365,"distance_from_trace_point":2.406891},{"lon":-122.420711,"lat":37.807353,"type":"interpolated","edge_index":5,"distance_along_edge":0.291984,"distance_from_trace_point":2.678536},{"lon":-122.420703,"lat":37.807315,"type":"interpolated","edge_index":5,"distance_along_edge":0.358873,"distance_from_trace_point":3.350277},{"lon":-122.420695,"lat":37.807274,"type":"matched","edge_index":5,"distance_along_edge":0.431837,"distance_from_trace_point":3.609289},{"lon":-122.420688,"lat":37.807235,"type":"interpolated","edge_index":5,"distance_along_edge":0.499979,"distance_from_trace_point":1.882559},{"lon":-122.420681,"lat":37.8072,"type":"interpolated","edge_index":5,"distance_along_edge":0.561854,"distance_from_trace_point":0.482221},{"lon":-122.420673,"lat":37.80716,"type":"matched","edge_index":5,"distance_along_edge":0.631587,"distance_from_trace_point":0.861261},{"lon":-122.420665,"lat":37.807117,"type":"interpolated","edge_index":5,"distance_along_edge":0.707789,"distance_from_trace_point":1.000242},{"lon":-122.420657,"lat":37.807077,"type":"interpolated","edge_index":5,"distance_along_edge":0.778656,"distance_from_trace_point":0.395885},{"lon":-122.42065,"lat":37.807041,"type":"matched","edge_index":5,"distance_along_edge":0.841913,"distance_from_trace_point":1.014984},{"lon":-122.420643,"lat":37.807006,"type":"interpolated","edge_index":5,"distance_along_edge":0.904331,"distance_from_trace_point":1.288735},{"lon":-122.420636,"lat":37.80697,"type":"interpolated","edge_index":18446744073709551615,"distance_along_edge":0.96654,"distance_from_trace_point":1.47615},{"lon":-122.420629,"lat":37.806934,"type":"matched","edge_index":6,"distance_along_edge":0.103179,"distance_from_trace_point":1.289527},{"lon":-122.420622,"lat":37.806897,"type":"interpolated","edge_index":6,"distance_along_edge":0.31802,"distance_from_trace_point":0.220444},{"lon":-122.420615,"lat":37.806861,"type":"interpolated","edge_index":18446744073709551615,"distance_along_edge":0.528534,"distance_from_trace_point":1.541106},{"lon":-122.420657,"lat":37.806795,"type":"matched","edge_index":7,"distance_along_edge":0.595916,"distance_from_trace_point":2.747732},{"lon":-122.4207,"lat":37.806801,"type":"interpolated","edge_index":8,"distance_along_edge":0.062513,"distance_from_trace_point":3.622053},{"lon":-122.420726,"lat":37.806774,"type":"interpolated","edge_index":8,"distance_along_edge":0.469581,"distance_from_trace_point":2.947424},{"lon":-122.420747,"lat":37.806753,"type":"matched","edge_index":8,"distance_along_edge":0.785689,"distance_from_trace_point":0.82921},{"lon":-122.420824,"lat":37.80673,"type":"interpolated","edge_index":9,"distance_along_edge":0.215212,"distance_from_trace_point":1.25211},{"lon":-122.420859,"lat":37.806726,"type":"interpolated","edge_index":9,"distance_along_edge":0.333894,"distance_from_trace_point":0.637116},{"lon":-122.420922,"lat":37.806718,"type":"matched","edge_index":9,"distance_along_edge":0.54482,"distance_from_trace_point":0.145268},{"lon":-122.420984,"lat":37.80671,"type":"interpolated","edge_index":9,"distance_along_edge":0.753801,"distance_from_trace_point":1.159935},{"lon":-122.421045,"lat":37.806702,"type":"matched","edge_index":9,"distance_along_edge":0.961525,"distance_from_trace_point":2.516019},{"lon":-122.421112,"lat":37.806693,"type":"interpolated","edge_index":10,"distance_along_edge":0.083611,"distance_from_trace_point":2.797297},{"lon":-122.421146,"lat":37.806689,"type":"interpolated","edge_index":10,"distance_along_edge":0.135104,"distance_from_trace_point":2.760857},{"lon":-122.421208,"lat":37.806681,"type":"matched","edge_index":10,"distance_along_edge":0.229818,"distance_from_trace_point":2.989769},{"lon":-122.421269,"lat":37.806673,"type":"interpolated","edge_index":10,"distance_along_edge":0.322785,"distance_from_trace_point":3.68313},{"lon":-122.421323,"lat":37.806667,"type":"matched","edge_index":10,"distance_along_edge":0.404489,"distance_from_trace_point":4.146421},{"lon":-122.42138,"lat":37.806659,"type":"interpolated","edge_index":10,"distance_along_edge":0.490334,"distance_from_trace_point":4.458814},{"lon":-122.421438,"lat":37.806652,"type":"matched","edge_index":10,"distance_along_edge":0.578528,"distance_from_trace_point":4.525069},{"lon":-122.421503,"lat":37.806644,"type":"interpolated","edge_index":10,"distance_along_edge":0.677382,"distance_from_trace_point":4.603085},{"lon":-122.421568,"lat":37.806635,"type":"matched","edge_index":10,"distance_along_edge":0.776494,"distance_from_trace_point":4.230565},{"lon":-122.421632,"lat":37.806627,"type":"interpolated","edge_index":10,"distance_along_edge":0.873834,"distance_from_trace_point":3.762803},{"lon":-122.421699,"lat":37.806619,"type":"matched","edge_index":10,"distance_along_edge":0.975342,"distance_from_trace_point":3.703835},{"lon":-122.421761,"lat":37.806611,"type":"interpolated","edge_index":11,"distance_along_edge":0.107474,"distance_from_trace_point":4.827114},{"lon":-122.421796,"lat":37.806606,"type":"interpolated","edge_index":11,"distance_along_edge":0.188874,"distance_from_trace_point":5.781906},{"lon":-122.421836,"lat":37.806601,"type":"matched","edge_index":11,"distance_along_edge":0.282549,"distance_from_trace_point":6.324982},{"lon":-122.421872,"lat":37.806596,"type":"interpolated","edge_index":11,"distance_along_edge":0.367499,"distance_from_trace_point":6.473721},{"lon":-122.421909,"lat":37.806592,"type":"interpolated","edge_index":11,"distance_along_edge":0.453318,"distance_from_trace_point":6.281025},{"lon":-122.421943,"lat":37.806587,"type":"interpolated","edge_index":11,"distance_along_edge":0.533641,"distance_from_trace_point":5.898188},{"lon":-122.421978,"lat":37.806583,"type":"matched","edge_index":11,"distance_along_edge":0.615367,"distance_from_trace_point":5.842731},{"lon":-122.422012,"lat":37.806578,"type":"interpolated","edge_index":11,"distance_along_edge":0.694878,"distance_from_trace_point":6.361017},{"lon":-122.422046,"lat":37.806574,"type":"interpolated","edge_index":18446744073709551615,"distance_along_edge":0.774872,"distance_from_trace_point":6.988429},{"lon":-122.422127,"lat":37.806485,"type":"matched","edge_index":12,"distance_along_edge":0.785452,"distance_from_trace_point":3.566164},{"lon":-122.422135,"lat":37.806463,"type":"interpolated","edge_index":13,"distance_along_edge":0.130882,"distance_from_trace_point":0.959138},{"lon":-122.422196,"lat":37.806455,"type":"matched","edge_index":13,"distance_along_edge":0.780361,"distance_from_trace_point":0.743158},{"lon":-122.42226,"lat":37.806446,"type":"interpolated","edge_index":14,"distance_along_edge":0.465036,"distance_from_trace_point":1.118028},{"lon":-122.42231,"lat":37.806439,"type":"matched","edge_index":15,"distance_along_edge":1.0,"distance_from_trace_point":0.773582},{"lon":-122.422371,"lat":37.806429,"type":"interpolated","edge_index":15,"distance_along_edge":0.062903,"distance_from_trace_point":2.486255},{"lon":-122.422428,"lat":37.80642,"type":"matched","edge_index":15,"distance_along_edge":0.121497,"distance_from_trace_point":3.765801},{"lon":-122.422464,"lat":37.806414,"type":"interpolated","edge_index":15,"distance_along_edge":0.158465,"distance_from_trace_point":4.204784},{"lon":-122.422527,"lat":37.806404,"type":"interpolated","edge_index":15,"distance_along_edge":0.22353,"distance_from_trace_point":4.923298},{"lon":-122.422582,"lat":37.806395,"type":"matched","edge_index":15,"distance_along_edge":0.279731,"distance_from_trace_point":5.482361},{"lon":-122.422629,"lat":37.806389,"type":"interpolated","edge_index":15,"distance_along_edge":0.327842,"distance_from_trace_point":4.668843},{"lon":-122.422675,"lat":37.806383,"type":"interpolated","edge_index":15,"distance_along_edge":0.374971,"distance_from_trace_point":3.986981},{"lon":-122.422718,"lat":37.806377,"type":"matched","edge_index":15,"distance_along_edge":0.418138,"distance_from_trace_point":3.249306},{"lon":-122.422762,"lat":37.806372,"type":"interpolated","edge_index":15,"distance_along_edge":0.463282,"distance_from_trace_point":2.539538},{"lon":-122.422811,"lat":37.806366,"type":"interpolated","edge_index":15,"distance_along_edge":0.513621,"distance_from_trace_point":1.230699},{"lon":-122.422862,"lat":37.806359,"type":"matched","edge_index":15,"distance_along_edge":0.56513,"distance_from_trace_point":0.386357},{"lon":-122.422928,"lat":37.806351,"type":"interpolated","edge_index":15,"distance_along_edge":0.632556,"distance_from_trace_point":0.794419},{"lon":-122.422964,"lat":37.806346,"type":"interpolated","edge_index":15,"distance_along_edge":0.669527,"distance_from_trace_point":0.946977},{"lon":-122.423,"lat":37.806341,"type":"matched","edge_index":15,"distance_along_edge":0.705482,"distance_from_trace_point":0.553799},{"lon":-122.423035,"lat":37.806337,"type":"interpolated","edge_index":15,"distance_along_edge":0.74126,"distance_from_trace_point":0.611163},{"lon":-122.423071,"lat":37.806332,"type":"interpolated","edge_index":15,"distance_along_edge":0.778617,"distance_from_trace_point":0.422326},{"lon":-122.423108,"lat":37.806328,"type":"interpolated","edge_index":15,"distance_along_edge":0.815972,"distance_from_trace_point":0.233488},{"lon":-122.423145,"lat":37.806323,"type":"matched","edge_index":15,"distance_along_edge":0.854118,"distance_from_trace_point":0.078449},{"lon":-122.423189,"lat":37.806317,"type":"interpolated","edge_index":15,"distance_along_edge":0.898988,"distance_from_trace_point":1.1569},{"lon":-122.423227,"lat":37.806312,"type":"interpolated","edge_index":15,"distance_along_edge":0.937696,"distance_from_trace_point":2.260778},{"lon":-122.423264,"lat":37.806308,"type":"matched","edge_index":15,"distance_along_edge":0.975233,"distance_from_trace_point":2.900158},{"lon":-122.423326,"lat":37.8063,"type":"interpolated","edge_index":16,"distance_along_edge":0.077449,"distance_from_trace_point":3.561991},{"lon":-122.423392,"lat":37.806291,"type":"matched","edge_index":16,"distance_along_edge":0.213605,"distance_from_trace_point":3.611601},{"lon":-122.423455,"lat":37.806283,"type":"interpolated","edge_index":16,"distance_along_edge":0.344566,"distance_from_trace_point":3.400984},{"lon":-122.42351,"lat":37.806276,"type":"matched","edge_index":16,"distance_along_edge":0.457822,"distance_from_trace_point":2.955397},{"lon":-122.42357,"lat":37.806268,"type":"interpolated","edge_index":16,"distance_along_edge":0.582381,"distance_from_trace_point":2.252289},{"lon":-122.423627,"lat":37.806261,"type":"matched","edge_index":16,"distance_along_edge":0.700131,"distance_from_trace_point":1.165832},{"lon":-122.423685,"lat":37.806254,"type":"interpolated","edge_index":16,"distance_along_edge":0.819532,"distance_from_trace_point":0.357191},{"lon":-122.423773,"lat":37.806242,"type":"matched","edge_index":17,"distance_along_edge":1.0,"distance_from_trace_point":2.31703},{"lon":-122.423811,"lat":37.806238,"type":"interpolated","edge_index":17,"distance_along_edge":0.427137,"distance_from_trace_point":2.831608},{"lon":-122.423855,"lat":37.806201,"type":"matched","edge_index":18,"distance_along_edge":0.390329,"distance_from_trace_point":0.817835},{"lon":-122.423854,"lat":37.806197,"type":"interpolated","edge_index":18,"distance_along_edge":0.437639,"distance_from_trace_point":3.80419},{"lon":-122.423849,"lat":37.806172,"type":"interpolated","edge_index":18446744073709551615,"distance_along_edge":0.752586,"distance_from_trace_point":2.480804},{"lon":-122.423844,"lat":37.806146,"type":"interpolated","edge_index":19,"distance_along_edge":0.014962,"distance_from_trace_point":2.948467},{"lon":-122.423836,"lat":37.806106,"type":"matched","edge_index":19,"distance_along_edge":0.099185,"distance_from_trace_point":3.537939},{"lon":-122.423827,"lat":37.806059,"type":"interpolated","edge_index":19,"distance_along_edge":0.201517,"distance_from_trace_point":3.830913},{"lon":-122.423819,"lat":37.806016,"type":"matched","edge_index":19,"distance_along_edge":0.294443,"distance_from_trace_point":4.401636},{"lon":-122.42381,"lat":37.805972,"type":"interpolated","edge_index":19,"distance_along_edge":0.387116,"distance_from_trace_point":5.058691},{"lon":-122.423803,"lat":37.805934,"type":"interpolated","edge_index":19,"distance_along_edge":0.470822,"distance_from_trace_point":5.113278},{"lon":-122.423796,"lat":37.805898,"type":"matched","edge_index":19,"distance_along_edge":0.547158,"distance_from_trace_point":4.754955},{"lon":-122.423789,"lat":37.805864,"type":"interpolated","edge_index":19,"distance_along_edge":0.621087,"distance_from_trace_point":3.758516},{"lon":-122.423782,"lat":37.805826,"type":"interpolated","edge_index":19,"distance_along_edge":0.701364,"distance_from_trace_point":3.520315},{"lon":-122.423774,"lat":37.80579,"type":"matched","edge_index":19,"distance_along_edge":0.780362,"distance_from_trace_point":3.713775},{"lon":-122.423768,"lat":37.805758,"type":"interpolated","edge_index":19,"distance_along_edge":0.848132,"distance_from_trace_point":4.789311},{"lon":-122.423762,"lat":37.805725,"type":"interpolated","edge_index":19,"distance_along_edge":0.918727,"distance_from_trace_point":4.915191},{"lon":-122.423755,"lat":37.805687,"type":"matched","edge_index":20,"distance_along_edge":1.0,"distance_from_trace_point":3.695609},{"lon":-122.423747,"lat":37.805653,"type":"interpolated","edge_index":20,"distance_along_edge":0.115417,"distance_from_trace_point":1.994065},{"lon":-122.42374,"lat":37.80562,"type":"interpolated","edge_index":20,"distance_along_edge":0.224357,"distance_from_trace_point":0.671984},{"lon":-122.423734,"lat":37.805593,"type":"matched","edge_index":20,"distance_along_edge":0.311025,"distance_from_trace_point":0.158047},{"lon":-122.423729,"lat":37.805567,"type":"interpolated","edge_index":20,"distance_along_edge":0.398522,"distance_from_trace_point":1.160339},{"lon":-122.423721,"lat":37.805531,"type":"interpolated","edge_index":20,"distance_along_edge":0.515339,"distance_from_trace_point":2.082472},{"lon":-122.423714,"lat":37.8055,"type":"matched","edge_index":20,"distance_along_edge":0.620174,"distance_from_trace_point":3.250773},{"lon":-122.423707,"lat":37.805467,"type":"interpolated","edge_index":20,"distance_along_edge":0.726264,"distance_from_trace_point":3.348559},{"lon":-122.423702,"lat":37.805441,"type":"interpolated","edge_index":18446744073709551615,"distance_along_edge":0.812038,"distance_from_trace_point":2.677427},{"lon":-122.423696,"lat":37.805415,"type":"interpolated","edge_index":18446744073709551615,"distance_along_edge":0.89969,"distance_from_trace_point":0.400519},{"lon":-122.423735,"lat":37.805378,"type":"matched","edge_index":21,"distance_along_edge":0.429627,"distance_from_trace_point":2.691354},{"lon":-122.423794,"lat":37.805371,"type":"interpolated","edge_index":21,"distance_along_edge":0.973638,"distance_from_trace_point":3.097096},{"lon":-122.423861,"lat":37.805362,"type":"matched","edge_index":22,"distance_along_edge":0.246288,"distance_from_trace_point":2.678037},{"lon":-122.423896,"lat":37.805357,"type":"interpolated","edge_index":22,"distance_along_edge":0.377459,"distance_from_trace_point":2.422453},{"lon":-122.42396,"lat":37.805348,"type":"interpolated","edge_index":22,"distance_along_edge":0.622482,"distance_from_trace_point":1.168146},{"lon":-122.424015,"lat":37.805341,"type":"matched","edge_index":22,"distance_along_edge":0.831454,"distance_from_trace_point":0.34423},{"lon":-122.424063,"lat":37.805334,"type":"interpolated","edge_index":23,"distance_along_edge":0.014863,"distance_from_trace_point":1.634852},{"lon":-122.424105,"lat":37.805328,"type":"interpolated","edge_index":23,"distance_along_edge":0.213038,"distance_from_trace_point":3.008635},{"lon":-122.424145,"lat":37.805323,"type":"matched","edge_index":23,"distance_along_edge":0.395482,"distance_from_trace_point":3.648889},{"lon":-122.42418,"lat":37.805318,"type":"interpolated","edge_index":23,"distance_along_edge":0.561355,"distance_from_trace_point":2.43631},{"lon":-122.424225,"lat":37.805312,"type":"interpolated","edge_index":23,"distance_along_edge":0.771103,"distance_from_trace_point":0.408079},{"lon":-122.424275,"lat":37.805306,"type":"matched","edge_index":24,"distance_along_edge":1.0,"distance_from_trace_point":0.922544},{"lon":-122.424309,"lat":37.805301,"type":"interpolated","edge_index":24,"distance_along_edge":0.090328,"distance_from_trace_point":1.727439},{"lon":-122.424347,"lat":37.805296,"type":"interpolated","edge_index":24,"distance_along_edge":0.188845,"distance_from_trace_point":1.708208},{"lon":-122.424383,"lat":37.805292,"type":"matched","edge_index":24,"distance_along_edge":0.281875,"distance_from_trace_point":1.210735},{"lon":-122.424418,"lat":37.805287,"type":"interpolated","edge_index":24,"distance_along_edge":0.37227,"distance_from_trace_point":1.818789},{"lon":-122.424452,"lat":37.805283,"type":"interpolated","edge_index":24,"distance_along_edge":0.458609,"distance_from_trace_point":2.740486},{"lon":-122.424489,"lat":37.805278,"type":"interpolated","edge_index":24,"distance_along_edge":0.556631,"distance_from_trace_point":2.830422},{"lon":-122.424519,"lat":37.805274,"type":"matched","edge_index":24,"distance_along_edge":0.634146,"distance_from_trace_point":0.120196},{"lon":-122.42456,"lat":37.805269,"type":"interpolated","edge_index":24,"distance_along_edge":0.73932,"distance_from_trace_point":0.758512},{"lon":-122.424601,"lat":37.805264,"type":"interpolated","edge_index":24,"distance_along_edge":0.846501,"distance_from_trace_point":1.514196},{"lon":-122.424648,"lat":37.805258,"type":"matched","edge_index":24,"distance_along_edge":0.96772,"distance_from_trace_point":0.849013},{"lon":-122.424685,"lat":37.805253,"type":"interpolated","edge_index":25,"distance_along_edge":0.115315,"distance_from_trace_point":0.297724},{"lon":-122.424723,"lat":37.805248,"type":"interpolated","edge_index":25,"distance_along_edge":0.292805,"distance_from_trace_point":0.840483},{"lon":-122.424767,"lat":37.805242,"type":"matched","edge_index":25,"distance_along_edge":0.497826,"distance_from_trace_point":0.497742},{"lon":-122.424813,"lat":37.805236,"type":"interpolated","edge_index":25,"distance_along_edge":0.714919,"distance_from_trace_point":0.142212},{"lon":-122.424854,"lat":37.80523,"type":"interpolated","edge_index":18446744073709551615,"distance_along_edge":0.910222,"distance_from_trace_point":0.965303},{"lon":-122.424916,"lat":37.805222,"type":"matched","edge_index":26,"distance_along_edge":0.154992,"distance_from_trace_point":2.289029},{"lon":-122.424972,"lat":37.805215,"type":"interpolated","edge_index":26,"distance_along_edge":0.360393,"distance_from_trace_point":1.796468},{"lon":-122.425029,"lat":37.805207,"type":"matched","edge_index":26,"distance_along_edge":0.56803,"distance_from_trace_point":1.631083},{"lon":-122.425083,"lat":37.8052,"type":"interpolated","edge_index":26,"distance_along_edge":0.766694,"distance_from_trace_point":2.286632},{"lon":-122.425135,"lat":37.805193,"type":"interpolated","edge_index":18446744073709551615,"distance_along_edge":0.956535,"distance_from_trace_point":2.193154},{"lon":-122.425175,"lat":37.805188,"type":"matched","edge_index":27,"distance_along_edge":0.429584,"distance_from_trace_point":2.005902},{"lon":-122.425211,"lat":37.805184,"type":"interpolated","edge_index":27,"distance_along_edge":1.0,"distance_from_trace_point":3.047296},{"lon":-122.425215,"lat":37.805126,"type":"interpolated","edge_index":28,"distance_along_edge":0.665388,"distance_from_trace_point":3.850134},{"lon":-122.425279,"lat":37.805089,"type":"matched","edge_index":29,"distance_along_edge":0.342563,"distance_from_trace_point":0.955201},{"lon":-122.425323,"lat":37.805084,"type":"interpolated","edge_index":29,"distance_along_edge":0.589668,"distance_from_trace_point":2.017214},{"lon":-122.425362,"lat":37.805079,"type":"interpolated","edge_index":18446744073709551615,"distance_along_edge":0.808372,"distance_from_trace_point":4.947515},{"lon":-122.425373,"lat":37.804994,"type":"matched","edge_index":30,"distance_along_edge":0.362401,"distance_from_trace_point":0.073877},{"lon":-122.425366,"lat":37.804961,"type":"interpolated","edge_index":30,"distance_along_edge":0.511313,"distance_from_trace_point":2.485109},{"lon":-122.425358,"lat":37.80492,"type":"interpolated","edge_index":30,"distance_along_edge":0.693115,"distance_from_trace_point":4.090077},{"lon":-122.425349,"lat":37.804873,"type":"matched","edge_index":30,"distance_along_edge":0.90534,"distance_from_trace_point":4.400719},{"lon":-122.42534,"lat":37.804827,"type":"interpolated","edge_index":31,"distance_along_edge":0.127559,"distance_from_trace_point":3.624124},{"lon":-122.42533,"lat":37.804781,"type":"matched","edge_index":31,"distance_along_edge":0.358999,"distance_from_trace_point":3.537837},{"lon":-122.425323,"lat":37.804744,"type":"interpolated","edge_index":31,"distance_along_edge":0.553473,"distance_from_trace_point":2.882044},{"lon":-122.425316,"lat":37.804707,"type":"interpolated","edge_index":31,"distance_along_edge":0.741728,"distance_from_trace_point":3.089139},{"lon":-122.425309,"lat":37.804673,"type":"matched","edge_index":31,"distance_along_edge":0.917462,"distance_from_trace_point":3.606873},{"lon":-122.425301,"lat":37.804634,"type":"interpolated","edge_index":32,"distance_along_edge":0.055349,"distance_from_trace_point":2.983668},{"lon":-122.425291,"lat":37.804585,"type":"interpolated","edge_index":32,"distance_along_edge":0.17391,"distance_from_trace_point":2.636741},{"lon":-122.425285,"lat":37.804558,"type":"matched","edge_index":32,"distance_along_edge":0.239965,"distance_from_trace_point":3.310787},{"lon":-122.425274,"lat":37.804507,"type":"interpolated","edge_index":32,"distance_along_edge":0.366149,"distance_from_trace_point":4.260312},{"lon":-122.425264,"lat":37.804456,"type":"matched","edge_index":32,"distance_along_edge":0.490662,"distance_from_trace_point":4.311954},{"lon":-122.425258,"lat":37.804428,"type":"interpolated","edge_index":32,"distance_along_edge":0.557935,"distance_from_trace_point":4.64118},{"lon":-122.425253,"lat":37.804402,"type":"interpolated","edge_index":32,"distance_along_edge":0.622841,"distance_from_trace_point":4.952491},{"lon":-122.425244,"lat":37.804358,"type":"matched","edge_index":32,"distance_along_edge":0.72914,"distance_from_trace_point":5.309752},{"lon":-122.425237,"lat":37.804326,"type":"interpolated","edge_index":32,"distance_along_edge":0.807799,"distance_from_trace_point":5.193408},{"lon":-122.425231,"lat":37.804298,"type":"interpolated","edge_index":18446744073709551615,"distance_along_edge":0.87644,"distance_from_trace_point":6.506727},{"lon":-122.425334,"lat":37.804234,"type":"matched","edge_index":33,"distance_along_edge":0.897627,"distance_from_trace_point":2.95853},{"lon":-122.425348,"lat":37.804232,"type":"interpolated","edge_index":33,"distance_along_edge":1.0,"distance_from_trace_point":2.717175},{"lon":-122.425345,"lat":37.804221,"type":"interpolated","edge_index":34,"distance_along_edge":0.112786,"distance_from_trace_point":7.270776},{"lon":-122.425461,"lat":37.804109,"type":"matched","edge_index":36,"distance_along_edge":1.0,"distance_from_trace_point":9.379615},{"lon":-122.425508,"lat":37.804103,"type":"interpolated","edge_index":36,"distance_along_edge":0.035828,"distance_from_trace_point":8.276265},{"lon":-122.425553,"lat":37.804097,"type":"interpolated","edge_index":36,"distance_along_edge":0.070404,"distance_from_trace_point":7.460769},{"lon":-122.425595,"lat":37.804092,"type":"matched","edge_index":36,"distance_along_edge":0.10261,"distance_from_trace_point":6.713283},{"lon":-122.425648,"lat":37.804085,"type":"interpolated","edge_index":36,"distance_along_edge":0.142375,"distance_from_trace_point":5.993881},{"lon":-122.425699,"lat":37.804079,"type":"interpolated","edge_index":36,"distance_along_edge":0.181118,"distance_from_trace_point":4.359749},{"lon":-122.42577,"lat":37.80407,"type":"matched","edge_index":36,"distance_along_edge":0.235288,"distance_from_trace_point":2.563397},{"lon":-122.425826,"lat":37.804063,"type":"interpolated","edge_index":36,"distance_along_edge":0.277736,"distance_from_trace_point":0.997903},{"lon":-122.425889,"lat":37.804055,"type":"matched","edge_index":36,"distance_along_edge":0.325962,"distance_from_trace_point":0.211119},{"lon":-122.425923,"lat":37.80405,"type":"interpolated","edge_index":36,"distance_along_edge":0.351635,"distance_from_trace_point":0.209414},{"lon":-122.425987,"lat":37.804042,"type":"interpolated","edge_index":36,"distance_along_edge":0.400166,"distance_from_trace_point":1.77428},{"lon":-122.426022,"lat":37.804038,"type":"matched","edge_index":36,"distance_along_edge":0.426722,"distance_from_trace_point":1.730584},{"lon":-122.426059,"lat":37.804033,"type":"interpolated","edge_index":36,"distance_along_edge":0.455057,"distance_from_trace_point":1.318126},{"lon":-122.426093,"lat":37.804029,"type":"interpolated","edge_index":36,"distance_along_edge":0.481322,"distance_from_trace_point":1.615738},{"lon":-122.426128,"lat":37.804025,"type":"interpolated","edge_index":36,"distance_along_edge":0.507884,"distance_from_trace_point":2.131738},{"lon":-122.426164,"lat":37.80402,"type":"matched","edge_index":36,"distance_along_edge":0.53474,"distance_from_trace_point":2.306429},{"lon":-122.426199,"lat":37.804016,"type":"interpolated","edge_index":36,"distance_along_edge":0.561447,"distance_from_trace_point":2.371927},{"lon":-122.426233,"lat":37.804011,"type":"interpolated","edge_index":36,"distance_along_edge":0.587562,"distance_from_trace_point":2.560346},{"lon":-122.426267,"lat":37.804007,"type":"interpolated","edge_index":36,"distance_along_edge":0.613527,"distance_from_trace_point":2.639572},{"lon":-122.426303,"lat":37.804003,"type":"matched","edge_index":36,"distance_along_edge":0.640975,"distance_from_trace_point":2.691343},{"lon":-122.426341,"lat":37.803998,"type":"interpolated","edge_index":36,"distance_along_edge":0.669315,"distance_from_trace_point":2.838579},{"lon":-122.426375,"lat":37.803994,"type":"interpolated","edge_index":36,"distance_along_edge":0.695579,"distance_from_trace_point":3.136191},{"lon":-122.426432,"lat":37.803986,"type":"matched","edge_index":36,"distance_along_edge":0.738614,"distance_from_trace_point":4.01907},{"lon":-122.426492,"lat":37.803979,"type":"interpolated","edge_index":36,"distance_along_edge":0.78476,"distance_from_trace_point":4.396536},{"lon":-122.426558,"lat":37.803971,"type":"matched","edge_index":36,"distance_along_edge":0.834305,"distance_from_trace_point":3.367588},{"lon":-122.426622,"lat":37.803962,"type":"interpolated","edge_index":36,"distance_along_edge":0.883409,"distance_from_trace_point":2.570754},{"lon":-122.426691,"lat":37.803954,"type":"matched","edge_index":36,"distance_along_edge":0.935394,"distance_from_trace_point":1.723674},{"lon":-122.426726,"lat":37.80395,"type":"interpolated","edge_index":36,"distance_along_edge":0.962729,"distance_from_trace_point":0.559692},{"lon":-122.426789,"lat":37.803942,"type":"interpolated","edge_index":37,"distance_along_edge":0.008136,"distance_from_trace_point":1.425152},{"lon":-122.426852,"lat":37.803934,"type":"matched","edge_index":37,"distance_along_edge":0.046698,"distance_from_trace_point":2.338158},{"lon":-122.426914,"lat":37.803926,"type":"interpolated","edge_index":37,"distance_along_edge":0.084454,"distance_from_trace_point":4.005793},{"lon":-122.42697,"lat":37.803919,"type":"matched","edge_index":37,"distance_along_edge":0.118656,"distance_from_trace_point":4.46523},{"lon":-122.427017,"lat":37.803913,"type":"interpolated","edge_index":37,"distance_along_edge":0.147166,"distance_from_trace_point":3.44886},{"lon":-122.427079,"lat":37.803905,"type":"interpolated","edge_index":37,"distance_along_edge":0.184822,"distance_from_trace_point":1.861539},{"lon":-122.427117,"lat":37.8039,"type":"matched","edge_index":37,"distance_along_edge":0.207987,"distance_from_trace_point":0.720911},{"lon":-122.427153,"lat":37.803895,"type":"interpolated","edge_index":37,"distance_along_edge":0.229968,"distance_from_trace_point":0.44733},{"lon":-122.427191,"lat":37.803891,"type":"interpolated","edge_index":37,"distance_along_edge":0.252773,"distance_from_trace_point":1.260426},{"lon":-122.427226,"lat":37.803886,"type":"interpolated","edge_index":37,"distance_along_edge":0.274264,"distance_from_trace_point":1.432263},{"lon":-122.42726,"lat":37.803882,"type":"matched","edge_index":37,"distance_along_edge":0.295163,"distance_from_trace_point":1.617908},{"lon":-122.427292,"lat":37.803878,"type":"interpolated","edge_index":37,"distance_along_edge":0.314527,"distance_from_trace_point":2.62302},{"lon":-122.427355,"lat":37.80387,"type":"interpolated","edge_index":37,"distance_along_edge":0.352756,"distance_from_trace_point":2.517453},{"lon":-122.427386,"lat":37.803866,"type":"matched","edge_index":37,"distance_along_edge":0.371377,"distance_from_trace_point":1.18842},{"lon":-122.427449,"lat":37.803858,"type":"interpolated","edge_index":37,"distance_along_edge":0.410175,"distance_from_trace_point":0.610034},{"lon":-122.427484,"lat":37.803854,"type":"interpolated","edge_index":37,"distance_along_edge":0.431305,"distance_from_trace_point":0.765729},{"lon":-122.427547,"lat":37.803846,"type":"matched","edge_index":37,"distance_along_edge":0.469405,"distance_from_trace_point":1.540166},{"lon":-122.427579,"lat":37.803842,"type":"interpolated","edge_index":37,"distance_along_edge":0.489011,"distance_from_trace_point":0.316699},{"lon":-122.427611,"lat":37.803838,"type":"interpolated","edge_index":37,"distance_along_edge":0.508391,"distance_from_trace_point":1.8078},{"lon":-122.427643,"lat":37.803834,"type":"matched","edge_index":37,"distance_along_edge":0.527772,"distance_from_trace_point":3.9323},{"lon":-122.427673,"lat":37.80383,"type":"interpolated","edge_index":37,"distance_along_edge":0.545966,"distance_from_trace_point":6.084413},{"lon":-122.427703,"lat":37.803826,"type":"interpolated","edge_index":37,"distance_along_edge":0.564634,"distance_from_trace_point":8.113542},{"lon":-122.427735,"lat":37.803822,"type":"interpolated","edge_index":37,"distance_along_edge":0.584006,"distance_from_trace_point":9.678349},{"lon":-122.427764,"lat":37.803818,"type":"matched","edge_index":37,"distance_along_edge":0.6016,"distance_from_trace_point":11.284574},{"lon":-122.427822,"lat":37.803811,"type":"interpolated","edge_index":37,"distance_along_edge":0.637251,"distance_from_trace_point":13.814348},{"lon":-122.427891,"lat":37.803802,"type":"matched","edge_index":37,"distance_along_edge":0.679046,"distance_from_trace_point":14.185637},{"lon":-122.427926,"lat":37.803798,"type":"interpolated","edge_index":37,"distance_along_edge":0.700538,"distance_from_trace_point":14.357474},{"lon":-122.427962,"lat":37.803793,"type":"interpolated","edge_index":37,"distance_along_edge":0.722029,"distance_from_trace_point":14.529312},{"lon":-122.428028,"lat":37.803785,"type":"matched","edge_index":37,"distance_along_edge":0.762156,"distance_from_trace_point":14.491504},{"lon":-122.428096,"lat":37.803776,"type":"interpolated","edge_index":37,"distance_along_edge":0.803591,"distance_from_trace_point":14.53526},{"lon":-122.428158,"lat":37.803768,"type":"matched","edge_index":37,"distance_along_edge":0.841458,"distance_from_trace_point":14.102161},{"lon":-122.428212,"lat":37.803762,"type":"interpolated","edge_index":37,"distance_along_edge":0.874112,"distance_from_trace_point":14.462192},{"lon":-122.428272,"lat":37.803754,"type":"matched","edge_index":37,"distance_along_edge":0.91089,"distance_from_trace_point":12.486801},{"lon":-122.428302,"lat":37.80375,"type":"interpolated","edge_index":37,"distance_along_edge":0.929271,"distance_from_trace_point":10.939412},{"lon":-122.428333,"lat":37.803746,"type":"interpolated","edge_index":37,"distance_along_edge":0.947884,"distance_from_trace_point":9.050685},{"lon":-122.428418,"lat":37.803736,"type":"matched","edge_index":38,"distance_along_edge":1.0,"distance_from_trace_point":6.543534},{"lon":-122.42841,"lat":37.803694,"type":"matched","edge_index":38,"distance_along_edge":0.044141,"distance_from_trace_point":0.482169}],"alternate_paths":[]};

function assertRouteSummaryEquals(summary: RouteSummary, obj: any) {
    expect(summary).toEqual({
        length: obj.length,
        time: obj.time,
        maxLat: obj.max_lat,
        minLat: obj.min_lat,
        maxLon: obj.max_lon,
        minLon: obj.min_lon,
    });
}

describe('GeospatialApi unit tests', () => {
    const api = new RoutingApi();

    beforeAll(() => {
        enableFetchMocks();
    });

    beforeEach(() => {
        fetchMock.resetMocks();
    });

    afterAll(() => {
        disableFetchMocks();
    });

    test('route endpoint data parsing', async () => {
        fetchMock.mockResponseOnce(JSON.stringify(mockRouteRes));

        const res = await api.route({routeRequest: routeRequest});
        expect(fetchMock.mock.calls.length).toEqual(1);

        expect(res).toBeApproximatelyEquivalent(mockRouteRes);
    });

    test('nearest_roads endpoint data parsing', async () => {
        fetchMock.mockResponseOnce(JSON.stringify(nearestRoadsMockRes));

        const res = await api.nearestRoads({nearestRoadsRequest: nearestRoadsRequest});
        expect(fetchMock.mock.calls.length).toEqual(1);

        expect(res).toBeApproximatelyEquivalent(nearestRoadsMockRes);
    });

    test('matrix endpoint data parsing', async () => {
        fetchMock.mockResponseOnce(JSON.stringify(matrixMockRes));

        const res = await api.timeDistanceMatrix({matrixRequest: matrixRequest});
        expect(fetchMock.mock.calls.length).toEqual(1);

        expect(res).toBeApproximatelyEquivalent(matrixMockRes);
    });

    test('isochrone endpoint data parsing', async () => {
        fetchMock.mockResponseOnce(JSON.stringify(isochroneMockRes));

        const res = await api.isochrone({isochroneRequest: isochroneRequest});
        expect(fetchMock.mock.calls.length).toEqual(1);

        expect(res).toBeApproximatelyEquivalent(isochroneMockRes);
    });

    test('optimized_route endpoint data parsing', async () => {
        fetchMock.mockResponseOnce(JSON.stringify(mockRouteRes));

        const res = await api.optimizedRoute({optimizedRouteRequest: routeRequest});
        expect(fetchMock.mock.calls.length).toEqual(1);

        expect(res).toBeApproximatelyEquivalent(mockRouteRes);
    });

    test('map_match endpoint data parsing', async () => {
        fetchMock.mockResponseOnce(JSON.stringify(mapMatchMockRes));

        const res = await api.mapMatch({mapMatchRequest: mapMatchRequest});
        expect(fetchMock.mock.calls.length).toEqual(1);

        expect(res).toBeApproximatelyEquivalent(mapMatchMockRes);
    });

    test('trace_attributes endpoint data parsing', async () => {
        fetchMock.mockResponseOnce(JSON.stringify(traceAttributesMockRes));

        const res = await api.traceAttributes({traceAttributesRequest: traceAttributesRequest});
        expect(fetchMock.mock.calls.length).toEqual(1);

        expect(res).toBeApproximatelyEquivalent(traceAttributesMockRes);
    });
});

(shouldRunIntegrationTests ? describe : describe.skip)('Routing integration tests', () => {
    const config = new Configuration({apiKey: apiKey});
    const api = new RoutingApi(config);

    test('route endpoint integration test', async () => {
        const res = await api.route({routeRequest: routeRequest});

        expect(res.id).toEqual(routeRequest.id);
        expect(res.trip.status).toEqual(0);
        expect(res.trip.units).toEqual("miles");
        expect(res.trip.legs.length).toBeGreaterThanOrEqual(1);
    });

    test('optimized_route endpoint integration test', async () => {
        const res = await api.optimizedRoute({optimizedRouteRequest: routeRequest});

        expect(res.id).toEqual(routeRequest.id);
        expect(res.trip.status).toEqual(0);
        expect(res.trip.units).toEqual("miles");
        expect(res.trip.legs.length).toBeGreaterThanOrEqual(1);
    });

    test('nearest_roads endpoint integration test', async () => {
        const res = await api.nearestRoads({nearestRoadsRequest: nearestRoadsRequest});

        // @ts-ignore
        expect(res[0]?.edges.length).toBeGreaterThanOrEqual(1);
        expect(res.length).toBeGreaterThanOrEqual(1);
    });

    test('matrix endpoint integration test', async () => {
        const res = await api.timeDistanceMatrix({matrixRequest: matrixRequest});

        expect(res.id).toEqual(matrixRequest.id);
        expect(res.sources).toEqual([matrixRequest.sources]);
        expect(res.targets).toEqual([matrixRequest.targets]);
        expect(res.sourcesToTargets.length).toBeGreaterThanOrEqual(1);
        expect(res.units).toEqual("kilometers");
    });

    test('isochrone endpoint integration test', async () => {
        const res = await api.isochrone({isochroneRequest: isochroneRequest});

        expect(res.id).toEqual(isochroneRequest.id);
        expect(res.features.length).toBeGreaterThanOrEqual(1);
    });

    test('map_match endpoint integration test', async () => {
        const res = await api.mapMatch({mapMatchRequest: mapMatchRequest});

        expect(res.id).toEqual(mapMatchRequest.id);
        expect(res.trip.status).toEqual(0);
        expect(res.trip.units).toEqual("miles");
        expect(res.trip.legs.length).toBeGreaterThanOrEqual(1);
    });

    test('trace_attributes endpoint integration test', async () => {
        const res = await api.traceAttributes({traceAttributesRequest: traceAttributesRequest});

        expect(res.id).toEqual(traceAttributesRequest.id);
        expect(res.units).toEqual("miles");
        expect(res.edges?.length).toBeGreaterThanOrEqual(1);
        expect(res.admins?.length).toBeGreaterThanOrEqual(1);
        expect(res.matchedPoints?.length).toBeGreaterThanOrEqual(1);
        expect(res.shape?.length).toBeGreaterThanOrEqual(1);
    });
});
